import{j as e,r as N,y as C,a as E,H as V,c as F}from"./app-kfujkipr.js";import{A as O}from"./AuthenticatedLayout-DMhaEnLh.js";import{M as $}from"./Modal-Ddq1rSw6.js";import{P as A}from"./PrimaryButton-B1wx0ps6.js";import{S as M}from"./SecondaryButton-DhWHpHPw.js";import{S as L}from"./ScrollArea-BgaQnnRQ.js";import{T as z,F as H}from"./FaturaDetailModal-BBCZ95mO.js";import{B,A as q}from"./BareButton-D_YvM0af.js";import{m as U}from"./proxy-BOf6KUTM.js";import{E as W}from"./ExportExcel-BmRx0cNp.js";import{F as K}from"./FaturaMonthDropdownGrid-lPplGsiP.js";/* empty css            */function J(a){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2}).format(a||0)}function Q(a){if(!a)return"";const l=new Date(a);if(Number.isNaN(l.getTime()))return"";const g=l.getDate().toString().padStart(2,"0"),i=l.toLocaleDateString("pt-BR",{month:"short"});return`${g} ${i}`}function X({title:a,description:l,amount:g,type:i,status:x,created_at:r,bank_name:u,total_installments:o,current_installment:m,display_installment:p,is_recurring:h,category_name:n,onClick:t}){const d=i==="credit",v=i==="debit",y="-",w="text-rose-500 dark:text-rose-400",S=Math.max(Number(o||1),1),b=Number(g||0)||0,_=S>1?b/S:b,s=Q(r),j=x==="paid"?"Pago":x==="overdue"?"Vencido":"Em aberto",c=x==="paid"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-300":x==="overdue"?"bg-rose-100 text-rose-700 dark:bg-rose-900/40 dark:text-rose-300":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300",k=o&&o>1?p||m||1:null,f=o&&o>1&&k?`${k}/${o}`:null;return e.jsxs("div",{className:"flex items-center justify-between gap-3 px-2 sm:px-3 lg:px-3 2xl:px-3 py-1.5 lg:py-2 2xl:py-2 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-900/60 transition cursor-pointer",onClick:t,role:t?"button":void 0,tabIndex:t?0:void 0,children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[e.jsx("div",{className:"h-8 w-8 lg:h-9 lg:w-9 2xl:h-9 2xl:w-9 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:e.jsx("span",{className:`h-2 w-2 rounded-full ${v||d?"bg-rose-500":"bg-gray-400"}`})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"truncate text-sm lg:text-base 2xl:text-base font-medium text-gray-900 dark:text-gray-100",children:a}),f&&e.jsx("span",{className:"rounded-full bg-purple-100 px-2.5 py-0.5 text-[11px] sm:text-xs 2xl:text-sm font-semibold uppercase tracking-wide text-purple-700 dark:bg-purple-900/40 dark:text-purple-300",children:f}),h&&e.jsx("span",{className:"rounded-full bg-blue-100 px-2.5 py-0.5 text-[10px] sm:text-[11px] 2xl:text-[11px] font-semibold uppercase tracking-wide text-blue-700 dark:bg-blue-900/40 dark:text-blue-300",children:"Recorrente"})]}),e.jsxs("div",{className:"mt-0.5 flex flex-wrap items-center gap-2 text-[11px] lg:text-xs 2xl:text-xs text-gray-500 dark:text-gray-400",children:[u&&e.jsx("span",{children:u}),n&&e.jsx("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2.5 py-0.5 text-[10px] sm:text-[11px] 2xl:text-[11px] font-medium text-gray-600 dark:bg-gray-800 dark:text-gray-200",children:n}),l&&e.jsxs("span",{className:"truncate max-w-xs",children:["• ",l]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[e.jsxs("span",{className:`text-sm lg:text-base 2xl:text-base font-semibold ${w}`,children:[y,J(_)]}),e.jsxs("div",{className:"flex items-center gap-2 text-[11px] lg:text-xs 2xl:text-xs text-gray-500 dark:text-gray-400",children:[s&&e.jsx("span",{children:s}),e.jsx("span",{className:`rounded-full px-2.5 py-0.5 text-[10px] sm:text-[11px] 2xl:text-[11px] ${c}`,children:j})]})]})]})}function R(a){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2}).format(a||0)}function Y({isOpen:a,onClose:l,monthKey:g,monthLabel:i,items:x=[],bankUserId:r=null,onPaid:u}){const[o,m]=N.useState(!1),p=N.useMemo(()=>x.filter(t=>t.status!=="paid"),[x]),h=N.useMemo(()=>p.reduce((t,d)=>{const v=d.total_installments||1,y=(d.amount||0)/v;return t+y},0),[p]),n=async()=>{if(!o){m(!0),C.dismiss();try{const t={month:g};r&&(t.bank_user_id=r),await E.post(route("transacoes.pay_month"),t),C.success("Pagamentos do mês registrados com sucesso."),m(!1),u&&u(),l&&l()}catch(t){console.error(t),m(!1),t.response&&t.response.data?.message?C.error(t.response.data.message):C.error("Erro ao registrar pagamentos do mês.")}}};return e.jsxs($,{isOpen:a,onClose:l,maxWidth:"md",title:`Pagar fatura de ${i}`,children:[e.jsx("div",{className:"space-y-4 text-sm sm:text-base",children:p.length===0?e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Não há pendências para este mês."}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Você está prestes a registrar o pagamento das pendências deste mês."}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-3 sm:p-4 text-xs sm:text-sm shadow-sm dark:border-gray-800 dark:bg-[#050505]",children:[e.jsx("p",{className:"mb-2 text-[11px] sm:text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Pendências do mês"}),e.jsx(L,{maxHeightClassName:"max-h-64",className:"space-y-2 pr-1",children:p.map(t=>{const d=t.total_installments||1,v=t.current_installment||0,y=(t.amount||0)/d,w=d>1?t.display_installment||Math.min(v+1,d):1,S=Math.max(d-(w-1),0);return e.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-lg bg-gray-50 px-2.5 py-2 text-gray-700 dark:bg-gray-900 dark:text-gray-200",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"truncate text-sm font-medium",children:t.title}),e.jsxs("p",{className:"mt-0.5 text-[11px] sm:text-xs text-gray-500 dark:text-gray-400",children:["Parcela atual: ",w,"/",d," • Valor da parcela: ",R(y)]})]}),e.jsx("div",{className:"text-right text-[11px] sm:text-xs text-gray-500 dark:text-gray-400",children:e.jsxs("p",{children:["Restantes: ",S]})})]},t.id)})}),e.jsxs("div",{className:"mt-3 flex items-center justify-between border-t border-dashed border-gray-200 pt-2 text-[11px] sm:text-xs dark:border-gray-700",children:[e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-300",children:"Total a pagar agora"}),e.jsx("span",{className:"font-semibold text-rose-600 dark:text-rose-400",children:R(h)})]})]}),e.jsx("p",{className:"text-[11px] sm:text-xs text-gray-500 dark:text-gray-400",children:'Observação: faturas parceladas só serão marcadas como "pagas" quando todas as parcelas forem quitadas.'})]})}),e.jsxs("div",{className:"mt-5 flex items-center justify-end gap-3",children:[e.jsx(M,{type:"button",onClick:l,className:"rounded-lg px-4 py-2 text-xs sm:text-sm font-medium text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800",children:"Cancelar"}),e.jsx(A,{type:"button",disabled:o||p.length===0,onClick:n,children:o?"Registrando...":"Confirmar pagamento"})]})]})}function Z(a){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2}).format(a||0)}function G({month_label:a,total_spent:l,items:g=[],month_key:i,bankUserId:x=null,onPaid:r,is_paid:u=!1,due_day:o=null,isCurrentPending:m=!1}){const[p,h]=N.useState(!1),[n,t]=N.useState("date"),[d,v]=N.useState("desc"),[y,w]=N.useState(null),S=N.useMemo(()=>{const b=[...g];return b.sort((_,s)=>{if(n==="date"){const j=_.created_at?new Date(_.created_at):null,c=s.created_at?new Date(s.created_at):null,k=j&&!Number.isNaN(j.getTime())?j.getTime():0,f=c&&!Number.isNaN(c.getTime())?c.getTime():0;return d==="asc"?k-f:f-k}if(n==="amount"){const j=Number(_.amount)||0,c=Number(s.amount)||0;return d==="asc"?j-c:c-j}return 0}),b},[g,n,d]);return e.jsxs("section",{className:"space-y-3 sm:space-y-4 lg:space-y-5 2xl:space-y-5",children:[e.jsxs("div",{className:"flex flex-col items-start gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("div",{className:"flex-1 flex justify-start items-center gap-3 sm:gap-4",children:e.jsxs("div",{className:"inline-flex flex-col items-start rounded-2xl sm:rounded-full px-4 py-2 sm:px-6 sm:py-3 bg-transparent",children:[o&&e.jsxs("p",{className:"mt-0.5 text-[11px] sm:text-xs lg:text-sm 2xl:text-sm text-gray-500 dark:text-gray-400",children:["Vencimento do cartão: todo dia ",e.jsx("span",{className:"font-semibold",children:o})]}),e.jsxs("p",{className:"mt-1 text-[11px] sm:text-xs lg:text-sm 2xl:text-sm text-gray-500 dark:text-gray-400",children:["Total de despesas do mês",":",e.jsx("span",{className:"ml-1 font-semibold text-rose-600 dark:text-rose-400",children:Z(l)})]})]})}),m&&e.jsx(A,{type:"button",onClick:()=>h(!0),className:"shrink-0 rounded-full px-4 py-2 text-[11px] sm:text-xs font-semibold uppercase tracking-wide focus:ring-rose-500 focus:ring-offset-2 dark:ring-offset-[#050505] w-full sm:w-auto",children:"Pagar"})]}),e.jsx("div",{className:"rounded-2xl bg-white border border-gray-50/90 dark:border-red-950/50 px-2 py-2 sm:px-3 sm:py-3 lg:px-4 lg:py-3 2xl:px-4 2xl:py-3 shadow-sm ring-1 ring-black/5 dark:bg-[#080808] dark:ring-white/5 shadow-gray-500 dark:shadow-gray-900",children:g.length===0?e.jsx("p",{className:"px-3 py-2 text-xs sm:text-sm lg:text-base 2xl:text-sm text-gray-500 dark:text-gray-400",children:"Nenhuma transação neste mês."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between px-3 pt-1 pb-1 text-[11px] sm:text-xs lg:text-sm 2xl:text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("span",{className:"font-semibold uppercase tracking-wide",children:"Ordenar"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{type:"button",onClick:()=>t("date"),className:`inline-flex items-center rounded-full border px-3 py-1.5 text-[10px] sm:text-[11px] 2xl:text-[11px] font-medium transition ${n==="date"?"border-[#7b1818] bg-[#7b1818] text-white shadow-sm dark:border-rose-500 dark:bg-rose-500":"border-gray-300 bg-white text-gray-600 hover:bg-gray-50 dark:border-gray-700 dark:bg-[#050505] dark:text-gray-200 dark:hover:bg-gray-800"}`,children:"Data"}),e.jsx(B,{type:"button",onClick:()=>t("amount"),className:`inline-flex items-center rounded-full border px-3 py-1.5 text-[10px] sm:text-[11px] 2xl:text-[11px] font-medium transition ${n==="amount"?"border-[#7b1818] bg-[#7b1818] text-white shadow-sm dark:border-rose-500 dark:bg-rose-500":"border-gray-300 bg-white text-gray-600 hover:bg-gray-50 dark:border-gray-700 dark:bg-[#050505] dark:text-gray-200 dark:hover:bg-gray-800"}`,children:"Valor"}),e.jsx(z,{label:d==="desc"?"Do mais recente/mais caro para o mais antigo/mais barato":"Do mais antigo/mais barato para o mais recente/mais caro",children:e.jsx(B,{type:"button",onClick:()=>v(b=>b==="desc"?"asc":"desc"),className:"inline-flex items-center rounded-full border border-gray-300 bg-white px-2.5 py-1.5 text-[10px] sm:text-[11px] 2xl:text-[11px] font-medium text-gray-600 shadow-sm hover:bg-gray-50 dark:border-gray-700 dark:bg-[#050505] dark:text-gray-200 dark:hover:bg-gray-800",children:d==="desc"?"▼":"▲"})})]})]}),e.jsx(L,{maxHeightClassName:"max-h-[360px] md:max-h-[420px] lg:max-h-[460px] 2xl:max-h-[400px]",className:"divide-y divide-gray-100 dark:divide-gray-800",children:S.map(b=>e.jsx(X,{...b,onClick:()=>w(b)},b.id))})]})}),e.jsx(Y,{isOpen:p,onClose:()=>h(!1),monthKey:i,monthLabel:a,items:g,bankUserId:x,onPaid:r}),e.jsx(H,{isOpen:!!y,onClose:()=>w(null),item:y})]})}function ee({months:a=[],total_spent:l,selectedMonthKey:g,onChangeMonth:i}){if(!a||a.length===0)return null;const x=(s,j)=>{if(!s||typeof s!="string")return j||s||"";const[c,k]=s.split("-"),f=parseInt(c,10),D=parseInt(k,10);if(!f||!D)return j||s;try{const T=new Date(f,D-1,1);return new Intl.DateTimeFormat("pt-BR",{month:"long",year:"numeric"}).format(T)}catch{return j||s}},r=s=>!s||typeof s!="string"?s:s.charAt(0).toUpperCase()+s.slice(1),u=a.findIndex(s=>s.month_key===g),o=u===-1?0:u,m=a[o],p=a[o-1]||null,h=a[o+1]||null,n=m?.is_paid,t=!!p,d=!!h,[v,y]=N.useState(0),w=()=>{t&&(y(-1),i(p.month_key))},S=()=>{d&&(y(1),i(h.month_key))},b={enter:s=>({x:s>0?100:-100,opacity:0,scale:.96}),center:{x:0,opacity:1,scale:1,transition:{type:"spring",stiffness:260,damping:25}},exit:s=>({x:s<0?100:-100,opacity:0,scale:.96,transition:{duration:.18}})};function _(s){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2}).format(s||0)}return e.jsxs("div",{className:"flex flex-col items-stretch gap-2 sm:flex-row sm:items-center sm:justify-center sm:gap-3 lg:gap-4 2xl:gap-4",children:[e.jsx("div",{className:"flex justify-between sm:w-32 sm:justify-end",children:p&&e.jsx(M,{type:"button",onClick:w,className:"rounded-full px-3 py-1 text-[11px] font-medium text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-900 border-none shadow-none",children:x(p.month_key,p.month_label)})}),e.jsx("div",{className:"flex-1 flex justify-center",children:e.jsx(q,{custom:v,initial:!1,mode:"wait",children:e.jsxs(U.div,{custom:v,variants:b,initial:"enter",animate:"center",exit:"exit",className:`inline-flex flex-col items-center rounded-full px-4 py-2 sm:px-6 sm:py-2 lg:px-8 lg:py-3 2xl:px-8 2xl:py-3 shadow-sm ring-1 bg-gradient-to-r dark:bg-gradient-to-r ${n?"from-emerald-50 via-white to-emerald-50 ring-emerald-200 dark:from-[#052e26] dark:via-[#050505] dark:to-[#052e26] dark:ring-emerald-900/50":"from-rose-50 via-white to-rose-50 ring-rose-100 dark:from-[#150709] dark:via-[#0b0b0b] dark:to-[#150709] dark:ring-rose-900/40"}`,children:[n?e.jsx("span",{className:"text-sm font-medium text-emerald-600 dark:text-emerald-400",children:"Paga"}):e.jsx("div",{}),e.jsx("span",{className:`mt-1 text-lg sm:text-xl md:text-2xl lg:text-3xl 2xl:text-3xl font-bold tracking-tight ${n?"text-emerald-600 dark:text-emerald-400":"text-gray-900 dark:text-gray-50"}`,children:r(x(m.month_key,m.month_label))}),e.jsx("span",{className:`font-semibold text-xl sm:text-2xl lg:text-3xl 2xl:text-3xl ${n?"text-emerald-600 dark:text-emerald-400":"text-rose-600 dark:text-rose-400"}`,children:_(l)})]},m.month_key)})}),e.jsx("div",{className:"flex justify-between sm:w-32 sm:justify-start",children:h&&e.jsx(M,{type:"button",onClick:S,className:"rounded-full px-3 py-1 text-[11px] sm:text-xs 2xl:text-sm font-medium text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-900 border-none shadow-none",children:x(h.month_key,h.month_label)})})]})}function te({monthlyGroups:a=[]}){const{rows:l,header:g}=N.useMemo(()=>{if(!a||a.length===0)return{rows:[],header:{}};const i=[],x={};a.forEach(n=>{!n||!n.month_key||n.is_paid||(i.push(n.month_key),n.month_label&&(x[n.month_key]=n.month_label))});const r=Array.from(new Set(i)).sort(),u=new Map;a.forEach(n=>{const t=n.month_key;!t||n.is_paid||!n.items||n.items.forEach(d=>{if(!d||d.status==="paid")return;const v=d.category_name||d.title||"Sem categoria",y=v,w=Math.max(Number(d.total_installments||1),1),b=(Number(d.amount||0)||0)/w;if(!u.has(y)){const s={label:v};r.forEach(j=>{s[j]=0}),s.total=0,u.set(y,s)}const _=u.get(y);_[t]=Number(_[t]||0)+b,_.total=Number(_.total||0)+b})});const o=Array.from(u.values());if(o.length===0)return{rows:[],header:{}};const m={label:"TOTAL GERAL"};let p=0;r.forEach(n=>{let t=0;o.forEach(d=>{t+=Number(d[n]||0)}),p+=t,m[n]=t}),m.total=p,o.push(m);const h={label:{name:"Categoria / Compra"}};return r.forEach(n=>{h[n]={name:x[n]||n}}),h.total={name:"TOTAL"},{rows:o,header:h}},[a]);return!l||l.length===0?null:e.jsx(W,{data:l,header:g,name:"faturas_pendentes"})}function ae({bankAccounts:a=[],categories:l=[],filters:g={},months:i=[],monthValue:x,onFiltersChange:r,onMonthChange:u}){const o=g?.bank_user_id??"",m=g?.category_id??"",p=t=>{const d=t.target.value||void 0;r&&r({bank_user_id:d,category_id:m||void 0})},h=t=>{const d=t.target.value||void 0;r&&r({bank_user_id:o||void 0,category_id:d})},n=t=>{!t||!u||u(t)};return e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs sm:text-sm lg:text-sm 2xl:text-sm",children:[e.jsxs("select",{value:o||"",onChange:p,className:"min-w-[190px] sm:min-w-[210px] lg:min-w-[230px] 2xl:min-w-[230px] rounded-lg border border-gray-300 bg-white px-2.5 py-1.5 text-xs sm:text-sm 2xl:text-sm shadow-sm focus:border-rose-500 focus:ring-rose-500 dark:border-gray-700 dark:bg-[#0f0f0f] dark:text-gray-100",children:[e.jsx("option",{value:"",children:"Todos os bancos"}),a.map(t=>e.jsxs("option",{value:t.id,children:[t.name,t.due_day?` - vence todo dia ${t.due_day}`:""]},t.id))]}),e.jsxs("select",{value:m||"",onChange:h,className:"min-w-[190px] sm:min-w-[210px] lg:min-w-[230px] 2xl:min-w-[230px] rounded-lg border border-gray-300 bg-white px-2.5 py-1.5 text-xs sm:text-sm 2xl:text-sm shadow-sm focus:border-rose-500 focus:ring-rose-500 dark:border-gray-700 dark:bg-[#0f0f0f] dark:text-gray-100",children:[e.jsx("option",{value:"",children:"Todas as categorias"}),l.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),i&&i.length>0&&e.jsx(K,{months:i,value:x,onChange:n})]})}function I(a){if(!a||typeof a!="string")return 0;const[l,g]=a.split("-"),i=parseInt(l,10)||0,x=parseInt(g,10)||0;return i*12+(x-1)}function P(a,l){if(!a||a.length===0)return null;if(l){if(a.some(u=>u.month_key===l))return l;const i=I(l);let x=a[0],r=Math.abs(I(x.month_key)-i);for(const u of a){const o=Math.abs(I(u.month_key)-i);o<r&&(x=u,r=o)}return x.month_key}return a[0].month_key}function se(a="",l,g){const[i,x]=N.useState(a);return{value:i,setValue:x,handleChange:o=>{let m=o.target.value??"";m=m.replace(/[^0-9]/g,"");{const p=String(g).length;m.length>p&&(m=m.slice(0,p))}x(m)},isValid:(()=>{if(i==="")return!1;const o=parseInt(i,10);return!(Number.isNaN(o)||o<l||o>g)})(),numericValue:i===""?null:parseInt(i,10)}}function ye({monthlyGroups:a=[],bankAccounts:l=[],categories:g=[],filters:i={},currentMonthKey:x=null}){const r=N.useMemo(()=>{if(!Array.isArray(a))return[];const c=new Map;for(const f of a)!f||!f.month_key||typeof f.month_key!="string"||c.has(f.month_key)||c.set(f.month_key,f);const k=Array.from(c.values());return k.sort((f,D)=>I(f.month_key)-I(D.month_key)),k},[a]),u=i?.bank_user_id??"",[o,m]=N.useState(()=>P(r,x)),[p,h]=N.useState(!1),n=se("",1,31),[t,d]=N.useState(!1);N.useEffect(()=>{if(!r||r.length===0){m(null);return}if(!r.some(k=>k.month_key===o)){const k=P(r,x);m(k)}},[r,o,x]);const v=c=>{F.get(route("transacoes.index"),c,{preserveState:!0,preserveScroll:!0})},y=l&&l.length>0&&u?l.find(c=>String(c.id)===String(u)):null,w=c=>{m(c)},S=()=>{y&&(n.setValue(y.due_day?String(y.due_day):""),h(!0))},b=async c=>{if(c.preventDefault(),!y||t)return;if(!n.isValid){C.error("Informe um dia de vencimento entre 1 e 31.");return}const k=n.numericValue;d(!0),C.dismiss();try{await E.patch(route("banks.update-due-day",y.id),{due_day:k}),C.success("Dia de vencimento atualizado com sucesso."),h(!1),F.reload({only:["bankAccounts"]})}catch(f){console.error(f),C.error("Não foi possível atualizar o dia de vencimento.")}finally{d(!1)}},_=()=>{if(!r||r.length===0||!s){F.reload({only:["monthlyGroups"],preserveState:!0});return}const c=r.findIndex(D=>D.month_key===s.month_key),k=c>0?c-1:c,f=r[k]||s;m(f.month_key),F.reload({only:["monthlyGroups"],preserveState:!0})},s=r&&r.length>0?r.find(c=>c.month_key===o)||r[0]:null,j=P(r,x);return e.jsxs(O,{children:[e.jsx(V,{title:"Faturas"}),e.jsxs("div",{className:"w-full max-w-[1500px] 2xl:max-w-[1600px] mx-auto px-3 sm:px-4 lg:px-6 2xl:px-6 space-y-4 sm:space-y-5 lg:space-y-6 2xl:space-y-6",children:[e.jsxs("header",{className:"pt-1 sm:pt-2 space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl 2xl:text-3xl font-semibold text-gray-900 mb-1 dark:text-gray-100",children:"Faturas"}),e.jsx("p",{className:"text-xs sm:text-sm lg:text-base 2xl:text-base text-gray-600 dark:text-gray-300",children:"Visualize suas despesas agrupadas por mês."})]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsx(ae,{bankAccounts:l,categories:g,filters:i,months:r,monthValue:s?.month_key||o,onFiltersChange:v,onMonthChange:w}),e.jsx("div",{className:"flex justify-start md:justify-end",children:e.jsx(te,{monthlyGroups:a})})]}),y&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs sm:text-sm 2xl:text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("span",{children:["Dia de vencimento:"," ",y.due_day?`todo dia ${y.due_day}`:"ainda não definido"]}),e.jsx(M,{type:"button",onClick:S,className:"rounded-full px-4 py-1.5 text-[11px] sm:text-xs font-semibold uppercase tracking-wide text-rose-600 border border-rose-500 hover:bg-rose-50 dark:border-rose-500/70 dark:text-rose-300 dark:hover:bg-rose-900/20",children:"Definir dia de vencimento"})]})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4 lg:space-y-5 2xl:space-y-5 pb-4 sm:pb-6 2xl:pb-6",children:[(!r||r.length===0)&&e.jsx("p",{className:"text-xs sm:text-sm lg:text-base 2xl:text-base text-gray-500 dark:text-gray-400",children:"Nenhuma fatura encontrada para o filtro atual."}),r&&r.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(ee,{months:r,selectedMonthKey:s?.month_key,onChangeMonth:w,...s}),s&&e.jsx(G,{...s,month_key:s.month_key,bankUserId:u||null,due_day:y?.due_day??null,onPaid:_,isCurrentPending:j&&s.month_key===j&&!s.is_paid},s.month_key)]})]}),e.jsx($,{isOpen:p,onClose:()=>!t&&h(!1),maxWidth:"sm",title:"Definir dia de vencimento",children:e.jsxs("form",{className:"space-y-4",onSubmit:b,noValidate:!0,children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 dark:text-gray-200",children:"Dia de vencimento do cartão (1 a 31)"}),e.jsx("input",{type:"number",min:1,max:31,inputMode:"numeric",value:n.value,onChange:n.handleChange,className:"w-full rounded-md border border-gray-300 bg-white p-2 text-xs sm:text-sm shadow-sm dark:border-gray-700 dark:bg-[#0f0f0f] dark:text-gray-100"})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-2 text-xs sm:text-xs",children:[e.jsx(M,{type:"button",onClick:()=>!t&&h(!1),className:"rounded-lg px-4 py-2 font-medium text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800",children:"Cancelar"}),e.jsx(A,{type:"submit",disabled:t,className:"rounded-lg px-4 py-2 font-semibold uppercase tracking-wide disabled:cursor-not-allowed",children:t?"Salvando...":"Salvar dia"})]})]})})]})]})}export{ye as default};
