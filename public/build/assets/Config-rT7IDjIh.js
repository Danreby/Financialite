import{r as h,j as e,a as g,y as f,b as j,H as y}from"./app-5ZeVuGc_.js";import{A as P}from"./AuthenticatedLayout-cjiCYC6A.js";import{P as v}from"./PrimaryButton-FSx2p_ez.js";import{F as p}from"./FloatLabelField-DcGfv5zD.js";import{m as t}from"./proxy-djb_ry30.js";/* empty css            */import"./BareButton-DgMgf21a.js";function b({user:l,itemVariants:s}){const[u,a]=h.useState(l?.name||""),[w,n]=h.useState(l?.email||""),[c,x]=h.useState(!1),[i,m]=h.useState({}),r=async o=>{o.preventDefault(),x(!0),m({});try{await g.put(route("profile.update"),{name:u,email:w}),f.success("Perfil atualizado com sucesso!")}catch(d){d.response?.data?.errors?m(d.response.data.errors):f.error("Erro ao atualizar perfil.")}finally{x(!1)}};return e.jsxs("div",{className:"bg-white dark:bg-[#0f0f0f] rounded-lg shadow-sm ring-1 ring-gray-200 dark:ring-gray-800 p-6 mb-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-rose-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Informações Pessoais"]})}),e.jsxs("form",{onSubmit:r,className:"space-y-5",children:[e.jsxs(t.div,{variants:s,children:[e.jsx(p,{id:"name",name:"name",type:"text",label:"Nome Completo",value:u,onChange:o=>{a(o.target.value),i.name&&m(d=>({...d,name:""}))},error:i.name,isRequired:!0,isDisabled:c}),i.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:i.name})]}),e.jsxs(t.div,{variants:s,children:[e.jsx(p,{id:"email",name:"email",type:"email",label:"E-mail",value:w,onChange:o=>{n(o.target.value),i.email&&m(d=>({...d,email:""}))},error:i.email,isRequired:!0,isDisabled:c}),i.email&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:i.email})]}),e.jsx(t.div,{variants:s,className:"pt-4",children:e.jsx(v,{type:"submit",disabled:c,className:"w-full py-2 px-4 rounded-lg",children:c?"Salvando...":"Salvar Alterações"})})]})]})}function N({itemVariants:l}){const[s,u]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[a,w]=h.useState(!1),[n,c]=h.useState({}),x=m=>{const{name:r,value:o}=m.target;u(d=>({...d,[r]:o})),n[r]&&c(d=>({...d,[r]:""}))},i=async m=>{m.preventDefault();const r={};if(s.currentPassword||(r.currentPassword="Senha atual é obrigatória"),s.newPassword||(r.newPassword="Nova senha é obrigatória"),s.newPassword&&s.newPassword.length<8&&(r.newPassword="Nova senha deve ter no mínimo 8 caracteres"),s.newPassword!==s.confirmPassword&&(r.confirmPassword="As senhas não correspondem"),Object.keys(r).length>0){c(r);return}w(!0),c({});try{await g.put(route("password.update"),{current_password:s.currentPassword,password:s.newPassword,password_confirmation:s.confirmPassword}),f.success("Senha alterada com sucesso!"),u({currentPassword:"",newPassword:"",confirmPassword:""})}catch(o){o.response?.data?.errors?c(o.response.data.errors):f.error("Erro ao alterar senha.")}finally{w(!1)}};return e.jsxs("div",{className:"bg-white dark:bg-[#0f0f0f] rounded-lg shadow-sm ring-1 ring-gray-200 dark:ring-gray-800 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-rose-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Segurança"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Altere sua senha regularmente para manter sua conta segura"})]}),e.jsxs("form",{onSubmit:i,className:"space-y-5",children:[e.jsxs(t.div,{variants:l,children:[e.jsx(p,{id:"currentPassword",name:"currentPassword",type:"password",label:"Senha Atual",value:s.currentPassword,onChange:x,error:n.currentPassword,isRequired:!0,isDisabled:a}),n.currentPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:n.currentPassword})]}),e.jsx(t.div,{variants:l,children:e.jsx(p,{id:"newPassword",name:"newPassword",type:"password",label:"Nova Senha",value:s.newPassword,onChange:x,error:n.newPassword,isRequired:!0,isDisabled:a,helperText:"Mínimo de 8 caracteres"})}),e.jsxs(t.div,{variants:l,children:[e.jsx(p,{id:"confirmPassword",name:"confirmPassword",type:"password",label:"Confirmar Nova Senha",value:s.confirmPassword,onChange:x,error:n.confirmPassword,isRequired:!0,isDisabled:a}),n.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:n.confirmPassword})]}),e.jsx(t.div,{variants:l,className:"pt-4",children:e.jsx(v,{type:"submit",disabled:a,className:"w-full py-2 px-4 rounded-lg",children:a?"Atualizando...":"Alterar Senha"})})]})]})}function z(){const{auth:l}=j().props,s=l.user,u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,staggerChildren:.1,delayChildren:.1}}},a={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.2}}};return e.jsxs(P,{children:[e.jsx(y,{title:"Configurações"}),e.jsxs(t.div,{initial:"hidden",animate:"visible",variants:u,className:"max-w-4xl",children:[e.jsxs(t.div,{variants:a,className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Configurações"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Gerencie suas informações pessoais e preferências de segurança"})]}),e.jsx(t.div,{variants:a,children:e.jsx(b,{user:s,itemVariants:a})}),e.jsx(t.div,{variants:a,children:e.jsx(N,{itemVariants:a})})]})]})}export{z as default};
