import{r as l,j as e,a as N,y as v,b as k,H as E}from"./app-BRy3IDCE.js";import{A as M}from"./AuthenticatedLayout-CorKAXFK.js";import{P as S}from"./PrimaryButton-CMvMSctb.js";import{F as p}from"./FloatLabelField-DnRd4nJD.js";import{m as r}from"./proxy-DE30lHB3.js";import{E as b}from"./EyeIcon-C8VoCQ5j.js";/* empty css            */import"./BareButton-D2GXtjzu.js";function D({user:d,itemVariants:s}){const[x,a]=l.useState(d?.name||""),[f,t]=l.useState(d?.email||""),[c,w]=l.useState(!1),[n,m]=l.useState({}),y=async o=>{o.preventDefault(),w(!0),m({});try{await N.put(route("profile.update"),{name:x,email:f}),v.success("Perfil atualizado com sucesso!")}catch(h){h.response?.data?.errors?m(h.response.data.errors):v.error("Erro ao atualizar perfil.")}finally{w(!1)}};return e.jsxs("div",{className:"bg-white dark:bg-[#0f0f0f] rounded-lg shadow-sm ring-1 ring-gray-200 dark:ring-gray-800 p-6 mb-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-rose-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Informações Pessoais"]})}),e.jsxs("form",{onSubmit:y,className:"space-y-5",children:[e.jsxs(r.div,{variants:s,children:[e.jsx(p,{id:"name",name:"name",type:"text",label:"Nome Completo",value:x,onChange:o=>{a(o.target.value),n.name&&m(h=>({...h,name:""}))},error:n.name,isRequired:!0,isDisabled:c}),n.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:n.name})]}),e.jsxs(r.div,{variants:s,children:[e.jsx(p,{id:"email",name:"email",type:"email",label:"E-mail",value:f,onChange:o=>{t(o.target.value),n.email&&m(h=>({...h,email:""}))},error:n.email,isRequired:!0,isDisabled:c}),n.email&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:n.email})]}),e.jsx(r.div,{variants:s,className:"pt-4",children:e.jsx(S,{type:"submit",disabled:c,className:"w-full py-2 px-4 rounded-lg",children:c?"Salvando...":"Salvar Alterações"})})]})]})}function A({itemVariants:d}){const[s,x]=l.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[a,f]=l.useState(!1),[t,c]=l.useState({}),[w,n]=l.useState(!1),[m,y]=l.useState(!1),[o,h]=l.useState(!1),j=u=>{const{name:i,value:g}=u.target;x(P=>({...P,[i]:g})),t[i]&&c(P=>({...P,[i]:""}))},C=async u=>{u.preventDefault();const i={};if(s.currentPassword||(i.currentPassword="Senha atual é obrigatória"),s.newPassword||(i.newPassword="Nova senha é obrigatória"),s.newPassword&&s.newPassword.length<8&&(i.newPassword="Nova senha deve ter no mínimo 8 caracteres"),s.newPassword!==s.confirmPassword&&(i.confirmPassword="As senhas não correspondem"),Object.keys(i).length>0){c(i);return}f(!0),c({});try{await N.put(route("password.update"),{current_password:s.currentPassword,password:s.newPassword,password_confirmation:s.confirmPassword}),v.success("Senha alterada com sucesso!"),x({currentPassword:"",newPassword:"",confirmPassword:""})}catch(g){g.response?.data?.errors?c(g.response.data.errors):v.error("Erro ao alterar senha.")}finally{f(!1)}};return e.jsxs("div",{className:"bg-white dark:bg-[#0f0f0f] rounded-lg shadow-sm ring-1 ring-gray-200 dark:ring-gray-800 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-rose-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Segurança"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Altere sua senha regularmente para manter sua conta segura"})]}),e.jsxs("form",{onSubmit:C,className:"space-y-5",children:[e.jsxs(r.div,{variants:d,children:[e.jsx(p,{id:"currentPassword",name:"currentPassword",type:w?"text":"password",label:"Senha Atual",value:s.currentPassword,onChange:j,error:t.currentPassword,isRequired:!0,isDisabled:a,rightElement:e.jsx("button",{type:"button",onClick:()=>n(u=>!u),className:"text-gray-400 hover:text-gray-200 focus:outline-none","aria-label":w?"Ocultar senha":"Mostrar senha",title:w?"Ocultar senha":"Mostrar senha",children:e.jsx(b,{type:w?1:2})})}),t.currentPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.currentPassword})]}),e.jsx(r.div,{variants:d,children:e.jsx(p,{id:"newPassword",name:"newPassword",type:m?"text":"password",label:"Nova Senha",value:s.newPassword,onChange:j,error:t.newPassword,isRequired:!0,isDisabled:a,helperText:"Mínimo de 8 caracteres",rightElement:e.jsx("button",{type:"button",onClick:()=>y(u=>!u),className:"text-gray-400 hover:text-gray-200 focus:outline-none","aria-label":m?"Ocultar senha":"Mostrar senha",title:m?"Ocultar senha":"Mostrar senha",children:e.jsx(b,{type:m?1:2})})})}),e.jsxs(r.div,{variants:d,children:[e.jsx(p,{id:"confirmPassword",name:"confirmPassword",type:o?"text":"password",label:"Confirmar Nova Senha",value:s.confirmPassword,onChange:j,error:t.confirmPassword,isRequired:!0,isDisabled:a,rightElement:e.jsx("button",{type:"button",onClick:()=>h(u=>!u),className:"text-gray-400 hover:text-gray-200 focus:outline-none","aria-label":o?"Ocultar senha":"Mostrar senha",title:o?"Ocultar senha":"Mostrar senha",children:e.jsx(b,{type:o?1:2})})}),t.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.confirmPassword})]}),e.jsx(r.div,{variants:d,className:"pt-4",children:e.jsx(S,{type:"submit",disabled:a,className:"w-full py-2 px-4 rounded-lg",children:a?"Atualizando...":"Alterar Senha"})})]})]})}function _(){const{auth:d}=k().props,s=d.user,x={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,staggerChildren:.1,delayChildren:.1}}},a={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.2}}};return e.jsxs(M,{children:[e.jsx(E,{title:"Configurações"}),e.jsxs(r.div,{initial:"hidden",animate:"visible",variants:x,className:"max-w-4xl",children:[e.jsxs(r.div,{variants:a,className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Configurações"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Gerencie suas informações pessoais e preferências de segurança"})]}),e.jsx(r.div,{variants:a,children:e.jsx(D,{user:s,itemVariants:a})}),e.jsx(r.div,{variants:a,children:e.jsx(A,{itemVariants:a})})]})]})}export{_ as default};
