import{j as e,r as l,y as C,a as W,c as K,H as Y}from"./app-D3a6aWwH.js";import{A as ee}from"./AuthenticatedLayout-DaxJmqFY.js";import{S as ae}from"./ScrollArea-DmGezmAp.js";import{S as O}from"./SecondaryButton-DspDn7Tj.js";import{D as Z}from"./DangerButton-CmLjZ4tF.js";import{T as q,F as te}from"./FaturaDetailModal-B4Vo8zQs.js";import{M as G}from"./Modal-CbD6eOEa.js";import{P as re}from"./PrimaryButton-04MiqHnh.js";import{B as U}from"./BareButton-CH1oiQit.js";import{F as z}from"./FloatLabelField-B4B_7ePq.js";import{u as se,a as ne}from"./useNumericInput-B0UrvCp_.js";import{P as le}from"./Pagination-ssRZgMUZ.js";import{F as ie}from"./FaturaMonthDropdownGrid-DsyD15hY.js";/* empty css            */import"./proxy-C_6h7FEh.js";const oe=({type:s=1,size:n=18,color:r="text-white"})=>e.jsxs(e.Fragment,{children:[s===1&&e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:"currentColor",className:"bi bi-trash-fill mt-2",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5M8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5m3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0"})}),s===2&&e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:"currentColor",className:"bi bi-trash mt-2",viewBox:"0 0 16 16",children:[e.jsx("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"}),e.jsx("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"})]}),s===3&&e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:"currentColor",className:"bi bi-trash3 mt-2 text-red-600",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"})}),s===4&&e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:"currentColor",className:"bi bi-trash3-fill mt-2",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5m-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5M4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06m6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528M8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5"})})]}),de=({type:s=1,size:n=18,color:r="text-white"})=>{const m=`fill-current ${r}`;return e.jsxs(e.Fragment,{children:[s===1&&e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,className:m,viewBox:"0 0 16 16",children:e.jsx("path",{d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325"})}),s===2&&e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-pencil-square mt-2 relative-position text-yellow-500",viewBox:"0 0 16 16",children:[e.jsx("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"}),e.jsx("path",{fillRule:"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"})]}),s===3&&e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-pen",viewBox:"0 0 16 16",children:e.jsx("path",{d:"m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001m-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708z"})})]})};function ce(s){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2}).format(s||0)}function xe(s){if(!s)return"";const n=new Date(s);return Number.isNaN(n.getTime())?"":n.toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric"})}function me({transaction:s,onEdit:n,onDelete:r,onShowDetails:m}){const{title:o,description:_,amount:u,status:h,created_at:f,bank_name:v,category_name:d,total_installments:T}=s,g=Math.max(Number(T||1),1),j=g>1?`${g}x`:null,p=()=>{m&&m(s)},w=i=>k=>{k.stopPropagation(),i&&i(s)};return e.jsxs("div",{className:"flex flex-col gap-2 rounded-lg px-3 lg:px-3 py-1.5 lg:py-2 hover:bg-gray-50 dark:hover:bg-gray-900/60 sm:flex-row sm:items-center sm:justify-between cursor-pointer",onClick:p,onKeyDown:i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),p())},role:m?"button":void 0,tabIndex:m?0:void 0,children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"truncate text-sm lg:text-base font-medium text-gray-900 dark:text-gray-100",children:o}),h&&e.jsx("span",{className:"rounded-full bg-gray-100 px-2.5 py-0.5 text-[10px] sm:text-[11px] font-semibold uppercase tracking-wide text-gray-700 dark:bg-gray-800 dark:text-gray-300",children:h==="overdue"?"Vencida":h==="unpaid"?"Em aberto":h})]}),e.jsxs("div",{className:"mt-0.5 flex flex-wrap items-center gap-2 text-[11px] lg:text-xs text-gray-500 dark:text-gray-400",children:[v&&e.jsxs("span",{children:[v,j&&` • ${j}`]}),d&&e.jsxs("span",{children:["• ",d]}),_&&e.jsxs("span",{className:"truncate max-w-xs",children:["• ",_]})]})]}),e.jsxs("div",{className:"mt-1 flex items-center justify-between gap-3 sm:mt-0 sm:gap-4",children:[e.jsxs("div",{className:"flex flex-col items-end text-right",children:[e.jsxs("span",{className:"text-sm lg:text-base font-semibold text-rose-500 dark:text-rose-400",children:["-",ce(u)]}),e.jsx("span",{className:"text-[11px] sm:text-xs text-gray-500 dark:text-gray-400",children:xe(f)})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1 text-[11px] sm:text-xs",children:[e.jsx(q,{label:"Editar transação",children:e.jsx(O,{type:"button",onClick:w(n),className:"rounded-full px-3.5 py-1.5 text-[10px] sm:text-[11px] font-semibold uppercase tracking-wide",children:e.jsx(de,{type:1,size:20})})}),e.jsx(q,{label:"Remover transação",children:e.jsx(Z,{type:"button",onClick:w(r),className:"rounded-full px-3.5 py-1.5 text-[10px] sm:text-[11px] font-semibold uppercase tracking-wide",children:e.jsx(oe,{type:1,size:20})})})]})]})]})}function ue({transactions:s=[],onEdit:n,onDelete:r,onShowDetails:m}){return s.length?e.jsx(ae,{maxHeightClassName:"max-h-[500px] md:max-h-[540px] lg:max-h-[580px] 2xl:max-h-[580px]",className:"divide-y divide-gray-100 dark:divide-gray-800",children:s.map(o=>e.jsx(me,{transaction:o,onEdit:n,onDelete:r,onShowDetails:m},o.id))}):e.jsx("p",{className:"px-3 py-2 text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:"Nenhuma transação pendente encontrada."})}function ge({isOpen:s,onClose:n,transaction:r,bankAccounts:m=[],categories:o=[],onUpdated:_}){const[u,h]=l.useState(""),[f,v]=l.useState(""),[d,T]=l.useState(""),[g,j]=l.useState(""),[p,w]=l.useState(""),[i,k]=l.useState("debit"),[N,M]=l.useState("1"),[y,t]=l.useState(!1),[b,D]=l.useState("unpaid"),[A,V]=l.useState(!1),R=se(),P=ne(),L=1e9,E=a=>{const c=a.target.value;if(!c)return;const S=c.replace(",","."),H=parseFloat(S);Number.isNaN(H)||H>L&&(a.target.value=String(L))},F=a=>{const c=a.target.value;if(!c)return;const S=parseInt(c,10);Number.isNaN(S)||S>360&&(a.target.value="360")};l.useEffect(()=>{r&&(h(r.title||""),v(r.description||""),T(String(r.amount??"")),j(r.bank_user_id?String(r.bank_user_id):""),w(r.category_id?String(r.category_id):""),k(r.type||"debit"),M(r.total_installments?String(r.total_installments):"1"),t(!!r.is_recurring),D(r.status||"unpaid"))},[r]);const I=async a=>{if(a.preventDefault(),!(!r||A)){if(C.dismiss(),!u.trim()){C.error("Informe o título da transação.");return}if(!d||Number(d)<=0){C.error("Informe um valor válido.");return}V(!0);try{const c=i==="debit",S=c?!1:y,H=c||S?1:Math.max(Number(N)||1,1),B={title:u.trim(),description:f.trim()||null,amount:Number(d),type:i,total_installments:H,is_recurring:S?1:0,bank_user_id:g||null,category_id:p||null};b==="paid"?(B.status="paid",B.paid_date=new Date().toISOString().slice(0,10)):(B.status="unpaid",B.paid_date=null);const $=await W.put(route("transacoes.update",r.id),B);C.success("Transação atualizada com sucesso."),_&&_($.data),n&&n()}catch(c){console.error(c),c.response?.data?.message?C.error(c.response.data.message):C.error("Erro ao atualizar transação.")}finally{V(!1)}}};return r?e.jsx(G,{isOpen:s,onClose:n,maxWidth:"2xl",title:"Editar transação",children:e.jsxs("form",{onSubmit:I,className:"space-y-4 md:space-y-6",noValidate:!0,children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 md:gap-5",children:[e.jsx("div",{className:"flex flex-col gap-1",children:e.jsx(z,{id:"edit_title",name:"edit_title",type:"text",label:"Título",value:u,onChange:a=>h(a.target.value),isRequired:!0,containerClassName:"flex flex-col",inputProps:{maxLength:120}})}),e.jsx(z,{id:"edit_amount",name:"amount",type:"number",label:"Valor (R$)",value:d,onChange:a=>T(a.target.value),isRequired:!0,containerClassName:"flex flex-col",inputProps:{inputMode:"decimal",min:"0.01",step:"0.01",onKeyDown:P,placeholder:"Valor da transação",maxLength:12,onInput:E}}),e.jsx("div",{className:"flex flex-col gap-1",children:e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full p-1 text-xs font-medium",children:[e.jsxs("label",{className:"inline-flex cursor-pointer items-center gap-2 rounded-full px-3 py-1 text-gray-700 transition hover:bg-white hover:shadow-sm dark:text-gray-200 dark:hover:bg-gray-800",children:[e.jsx("input",{type:"radio",name:"edit_type",value:"debit",checked:i==="debit",onChange:a=>k(a.target.value),className:"h-3 w-3 appearance-none rounded-full border border-gray-400 checked:border-[#7b1818] checked:bg-[#7b1818] dark:border-gray-600"}),e.jsx("span",{children:"Débito"})]}),e.jsxs("label",{className:"inline-flex cursor-pointer items-center gap-2 rounded-full px-3 py-1 text-gray-700 transition hover:bg-white hover:shadow-sm dark:text-gray-200 dark:hover:bg-gray-800",children:[e.jsx("input",{type:"radio",name:"edit_type",value:"credit",checked:i==="credit",onChange:a=>k(a.target.value),className:"h-3 w-3 appearance-none rounded-full border border-gray-400 checked:border-emerald-600 checked:bg-emerald-600 dark:border-gray-600"}),e.jsx("span",{children:"Crédito"})]})]})}),e.jsx(z,{id:"edit_total_installments",name:"total_installments",type:"number",label:"Parcelas",value:N,onChange:a=>M(a.target.value),containerClassName:"flex flex-col",isDisabled:y||i==="debit",inputProps:{min:"1",max:"360",inputMode:"numeric",onKeyDown:R,placeholder:"Quantidade de parcelas",maxLength:3,onInput:F}}),e.jsx("div",{className:"flex flex-col gap-1 md:col-span-2",children:e.jsx(z,{id:"edit_description",name:"edit_description",as:"textarea",label:"Descrição",value:f,onChange:a=>v(a.target.value),containerClassName:"flex flex-col",inputProps:{maxLength:250,rows:1,placeholder:"Descrição da transação"}})}),e.jsxs("div",{className:"flex items-center justify-between md:col-span-2",children:[e.jsx("span",{className:"text-sm md:text-base font-medium text-gray-700 dark:text-gray-200",children:"Transação recorrente"}),e.jsx(U,{type:"button",onClick:()=>{i!=="debit"&&t(a=>!a)},className:`relative inline-flex h-6 w-11 items-center rounded-full transition focus:outline-none focus:ring-2 focus:ring-[#7b1818] focus:ring-offset-2 ${y?"bg-[#7b1818] shadow-lg shadow-[#7b1818]/40":"bg-gray-300 dark:bg-gray-700"}`,children:e.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow transition ${y?"translate-x-5":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between md:col-span-2",children:[e.jsx("span",{className:"text-sm md:text-base font-medium text-gray-700 dark:text-gray-200",children:"Marcar como pago"}),e.jsx(U,{type:"button",onClick:()=>{D(a=>a==="paid"?"unpaid":"paid")},className:`relative inline-flex h-6 w-11 items-center rounded-full transition focus:outline-none focus:ring-2 focus:ring-emerald-600 focus:ring-offset-2 ${b==="paid"?"bg-emerald-600 shadow-lg shadow-emerald-600/40":"bg-gray-300 dark:bg-gray-700"}`,children:e.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow transition ${b==="paid"?"translate-x-5":"translate-x-1"}`})})]}),e.jsx("div",{className:"flex flex-col gap-1",children:e.jsxs("select",{value:p,onChange:a=>w(a.target.value),className:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm md:text-base shadow-sm dark:border-gray-700 dark:bg-[#0f0f0f] dark:text-gray-100",children:[e.jsx("option",{value:"",children:"Sem categoria"}),o.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})}),e.jsx("div",{className:"flex flex-col gap-1",children:e.jsxs("select",{value:g,onChange:a=>j(a.target.value),className:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm md:text-base shadow-sm dark:border-gray-700 dark:bg-[#0f0f0f] dark:text-gray-100",children:[e.jsx("option",{value:"",children:"Sem conta vinculada"}),m.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})})]}),e.jsxs("div",{className:"mt-5 md:mt-6 flex items-center justify-end gap-4",children:[e.jsx(O,{type:"button",onClick:n,className:"rounded-lg px-4 md:px-5 py-2 md:py-2.5 text-sm md:text-base font-medium text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800",children:"Cancelar"}),e.jsx(re,{type:"submit",disabled:A,children:A?"Salvando...":"Salvar"})]})]})}):null}function pe({searchTerm:s,onSearchChange:n,months:r=[],selectedMonthKey:m,onMonthChange:o,orderOptions:_=[],selectedOrder:u,onOrderChange:h,bankAccounts:f=[],selectedBankId:v,onBankChange:d,selectedType:T,onTypeChange:g,selectedStatus:j,onStatusChange:p,recurringFilter:w,onRecurringChange:i,categories:k=[],selectedCategoryId:N,onCategoryChange:M,onClear:y}){return e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 w-full sm:w-auto",children:[e.jsx("input",{type:"text",value:s,onChange:t=>n?.(t.target.value),className:"w-full sm:w-56 rounded-xl border border-gray-300 bg-white px-3 py-2 text-xs sm:text-sm shadow-sm focus:border-rose-500 focus:ring-rose-500 dark:border-gray-700 dark:bg-[#0f0f0f] dark:text-gray-100",placeholder:"Buscar por título"}),r&&r.length>0&&e.jsx("div",{className:"sm:ml-1",children:e.jsx(ie,{months:r,value:m||r[0]?.month_key||"",onChange:t=>o?.(t||"")})})]}),e.jsx("div",{className:"flex flex-wrap gap-2 sm:justify-end",children:e.jsxs("div",{className:"flex flex-wrap gap-1 rounded-xl border border-gray-200 px-2.5 py-1.5 dark:border-gray-800",children:[e.jsx("span",{className:"text-[11px] font-semibold uppercase text-gray-600 dark:text-gray-300 mr-1 mt-1",children:"Ordenar:"}),_.map(t=>{const b=u?.startsWith(t.key),D=b&&u.endsWith("_asc")?"asc":"desc",A=b&&D==="desc"?"asc":"desc",V=b?D==="asc"?"▲":"▼":"",R=t.key==="title"?b&&D==="desc"?"Z-A":"A-Z":t.label;return e.jsxs("button",{type:"button",onClick:()=>h?.(`${t.key}_${A}`),className:"rounded-lg px-2.5 py-1 text-[11px] sm:text-xs font-semibold transition "+(b?"bg-rose-500 text-white shadow":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-[#111] dark:text-gray-200 dark:hover:bg-gray-800"),children:[R," ",V]},t.key)})]})})]}),e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-1 min-w-[180px]",children:[e.jsx("label",{className:"text-[11px] font-semibold text-gray-600 dark:text-gray-300",children:"Banco"}),e.jsxs("select",{value:v,onChange:t=>d?.(t.target.value),className:"w-full rounded-lg border border-gray-300 bg-white px-3 py-1.5 text-xs sm:text-sm shadow-sm focus:border-rose-500 focus:ring-rose-500 dark:border-gray-700 dark:bg-[#0f0f0f] dark:text-gray-100",children:[e.jsx("option",{value:"",children:"Todos"}),f.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{className:"flex flex-col gap-1 min-w-[160px]",children:[e.jsx("label",{className:"text-[11px] font-semibold text-gray-600 dark:text-gray-300",children:"Tipo"}),e.jsxs("select",{value:T,onChange:t=>g?.(t.target.value),className:"w-full rounded-lg border border-gray-300 bg-white px-3 py-1.5 text-xs sm:text-sm shadow-sm focus:border-rose-500 focus:ring-rose-500 dark:border-gray-700 dark:bg-[#0f0f0f] dark:text-gray-100",children:[e.jsx("option",{value:"",children:"Débito e crédito"}),e.jsx("option",{value:"debit",children:"Apenas débito"}),e.jsx("option",{value:"credit",children:"Apenas crédito"})]})]}),e.jsxs("div",{className:"flex flex-col gap-1 min-w-[160px]",children:[e.jsx("label",{className:"text-[11px] font-semibold text-gray-600 dark:text-gray-300",children:"Status"}),e.jsxs("select",{value:j,onChange:t=>p?.(t.target.value),className:"w-full rounded-lg border border-gray-300 bg-white px-3 py-1.5 text-xs sm:text-sm shadow-sm focus:border-rose-500 focus:ring-rose-500 dark:border-gray-700 dark:bg-[#0f0f0f] dark:text-gray-100",children:[e.jsx("option",{value:"",children:"Pendentes e pagas"}),e.jsx("option",{value:"unpaid",children:"Apenas pendentes"}),e.jsx("option",{value:"paid",children:"Apenas pagas"}),e.jsx("option",{value:"overdue",children:"Apenas vencidas"})]})]}),e.jsxs("div",{className:"flex flex-col gap-1 min-w-[170px]",children:[e.jsx("label",{className:"text-[11px] font-semibold text-gray-600 dark:text-gray-300",children:"Recorrência"}),e.jsxs("select",{value:w,onChange:t=>i?.(t.target.value),className:"w-full rounded-lg border border-gray-300 bg-white px-3 py-1.5 text-xs sm:text-sm shadow-sm focus:border-rose-500 focus:ring-rose-500 dark:border-gray-700 dark:bg-[#0f0f0f] dark:text-gray-100",children:[e.jsx("option",{value:"",children:"Todas"}),e.jsx("option",{value:"recurring",children:"Somente recorrentes"}),e.jsx("option",{value:"non_recurring",children:"Somente não recorrentes"})]})]}),e.jsxs("div",{className:"flex flex-col gap-1 min-w-[190px]",children:[e.jsx("label",{className:"text-[11px] font-semibold text-gray-600 dark:text-gray-300",children:"Categoria"}),e.jsxs("select",{value:N,onChange:t=>M?.(t.target.value),className:"w-full rounded-lg border border-gray-300 bg-white px-3 py-1.5 text-xs sm:text-sm shadow-sm focus:border-rose-500 focus:ring-rose-500 dark:border-gray-700 dark:bg-[#0f0f0f] dark:text-gray-100",children:[e.jsx("option",{value:"",children:"Todas"}),k.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]})]})}),e.jsx("div",{className:"flex flex-wrap items-center justify-between gap-2 pt-2",children:e.jsx(O,{type:"button",onClick:y,className:"rounded-full px-4 py-1.5 text-[11px] sm:text-xs font-semibold uppercase tracking-wide text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800",children:"Limpar filtros"})})]})}function Me({transactions:s,bankAccounts:n=[],categories:r=[],months:m=[],filters:o={}}){const _=Array.isArray(s?.data)?s.data:Array.isArray(s)?s:[],[u,h]=l.useState(String(o?.bank_user_id??"")),[f,v]=l.useState(String(o?.category_id??"")),[d,T]=l.useState(String(o?.type??"")),[g,j]=l.useState(String(o?.status??"")),[p,w]=l.useState(String(o?.recurring??"")),[i,k]=l.useState(String(o?.search??"")),[N,M]=l.useState(String(o?.month_key??"")),[y,t]=l.useState(String(o?.order??"created_desc")),b=[{key:"created",label:"Data"},{key:"title",label:"A-Z"},{key:"amount",label:"Valor"}],[D,A]=l.useState(null),[V,R]=l.useState(!1),[P,L]=l.useState(!1),[E,F]=l.useState(null),[I,a]=l.useState(null),[c,S]=l.useState(null);l.useEffect(()=>{const x=setTimeout(()=>{K.get(route("transactions.index"),{bank_user_id:u||void 0,category_id:f||void 0,type:d||void 0,status:g||void 0,recurring:p||void 0,search:i||void 0,month_key:N||void 0,order:y||void 0},{preserveState:!0,preserveScroll:!0,replace:!0})},300);return()=>clearTimeout(x)},[u,f,d,g,p,i,N,y]);const H=x=>{A(x),R(!0)},B=()=>{K.get(route("transactions.index"),{bank_user_id:u||void 0,category_id:f||void 0,type:d||void 0,status:g||void 0,recurring:p||void 0,search:i||void 0,month_key:N||void 0,order:y||void 0},{preserveState:!0,preserveScroll:!0,replace:!0})},$=async x=>{!x||I||(F(x),L(!0))},Q=x=>{x&&S(x)},X=()=>{h(""),v(""),T(""),j(""),w(""),k(""),M(""),t("created_desc")},J=async()=>{if(!(!E||I)){a(E.id),C.dismiss();try{await W.delete(route("transacoes.destroy",E.id)),C.success("Transação removida com sucesso."),K.get(route("transactions.index"),{bank_user_id:u||void 0,category_id:f||void 0,type:d||void 0,status:g||void 0,recurring:p||void 0,search:i||void 0,month_key:N||void 0,order:y||void 0},{preserveState:!0,preserveScroll:!0,replace:!0})}catch(x){console.error(x),x.response?.data?.message?C.error(x.response.data.message):C.error("Erro ao remover transação.")}finally{a(null),L(!1),F(null)}}};return e.jsxs(ee,{children:[e.jsx(Y,{title:"Transações"}),e.jsxs("div",{className:"w-full max-w-[1450px] 2xl:max-w-[1500px] mx-auto px-3 py-2 space-y-3 sm:px-4 sm:py-3 lg:px-5 lg:py-4",children:[e.jsxs("header",{className:"space-y-1 pt-1 sm:pt-1.5",children:[e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-2xl font-semibold text-gray-900 dark:text-gray-100",children:"Transações"}),e.jsx("p",{className:"text-xs sm:text-sm lg:text-sm text-gray-600 dark:text-gray-300",children:"Visualize, edite ou remova transações que ainda não foram pagas."})]}),e.jsxs("section",{className:"rounded-2xl bg-white p-4 shadow-md ring-1 ring-black/5 dark:bg-[#0b0b0b] dark:ring-black/30 sm:p-4 lg:p-4",children:[e.jsx(pe,{searchTerm:i,onSearchChange:k,months:m,selectedMonthKey:N,onMonthChange:x=>M(x),orderOptions:b,selectedOrder:y,onOrderChange:t,bankAccounts:n,selectedBankId:u,onBankChange:h,selectedType:d,onTypeChange:T,selectedStatus:g,onStatusChange:j,recurringFilter:p,onRecurringChange:w,categories:r,selectedCategoryId:f,onCategoryChange:v,onClear:X}),e.jsx(ue,{transactions:_,onEdit:H,onDelete:$,onShowDetails:Q}),e.jsx(le,{links:s?.links||[]})]})]}),e.jsx(ge,{isOpen:V,onClose:()=>R(!1),transaction:D,bankAccounts:n,categories:r,onUpdated:B}),e.jsx(te,{isOpen:!!c,onClose:()=>S(null),item:c}),e.jsxs(G,{isOpen:P,onClose:()=>{I||(L(!1),F(null))},title:"Remover transação",maxWidth:"sm",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Tem certeza que deseja remover a transação"," ",e.jsx("span",{className:"font-semibold",children:E?.title??"selecionada"}),"?"]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:"Essa ação é permanente e não poderá ser desfeita."}),e.jsxs("div",{className:"mt-5 flex items-center justify-end gap-3",children:[e.jsx(O,{type:"button",onClick:()=>{I||(L(!1),F(null))},className:"rounded-lg px-4 py-2 text-xs font-medium text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800",children:"Cancelar"}),e.jsx(Z,{type:"button",onClick:J,disabled:!!I,className:"rounded-lg px-4 py-2 text-xs font-semibold uppercase tracking-wide",children:I?"Removendo...":"Remover"})]})]})]})}export{Me as default};
